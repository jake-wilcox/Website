import React, { useState, useEffect, useRef} from 'react';
import axios from 'axios';

const VisitorsModal = ( {isVisable, token} ) => {
if (!isVisable) return null;

const [data, setData] = useState({})
const isFetched = useRef(false)

useEffect(() => {
    
    async function makePost(){
        console.log('fetching')
        const response = await axios.get('http://localhost:8000/api/addSignature', {params: {'code': token}});
        setData(response.data)
    }
    console.log('inside use effect')
if (isFetched.current){
console.log('already fetched')
return;}
isFetched.current = true
makePost();
}, []);

const imageData = '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'
const blobData = new Blob([imageData], {type: "image/jpeg" });

const imageUrl = URL.createObjectURL(blobData)


  return (
  <div className ="fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex justify-center items-center">
    <div className="w-6/12 h-6/12 bg-white flex rounded-lg p-10">
        
        {!!data && <pre>{JSON.stringify(data, null, 4)}</pre>}
        <img src={`data:image/jpeg;base64,${imageData}`} alt="User Profile" />

    </div>
   </div>
  );
}
export default VisitorsModal
